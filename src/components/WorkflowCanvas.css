/* 工作流画布样式 - 深色主题 */
.workflow-canvas {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
  background: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%); /* 渐变深色背景 */
  position: relative;
  overflow: hidden;
}

/* 添加背景装饰点 */
.workflow-canvas::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    radial-gradient(circle at 25% 25%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.workflow-canvas-header {
  padding: 20px 24px;
  background: rgba(15, 23, 42, 0.8); /* 半透明深色头部 */
  border-bottom: 1px solid rgba(75, 85, 99, 0.3);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px); /* 毛玻璃效果 */
  position: relative;
  z-index: 10;
}

.workflow-title {
  font-size: 24px;
  font-weight: 700;
  color: #F9FAFB; /* 浅色文字 */
  margin: 0 0 8px 0;
}

.workflow-description {
  font-size: 14px;
  color: #D1D5DB; /* 浅灰色文字 */
  margin: 0;
  line-height: 1.5;
}

.workflow-canvas-content {
  flex: 1;
  position: relative;
  background: transparent; /* 透明背景让渐变显示 */
  z-index: 5;
}

/* ReactFlow 深色主题样式 */
.react-flow__viewport {
  background: transparent !important; /* 透明视口让渐变显示 */
}

.react-flow__controls {
  background: #374151 !important; /* 深色控件背景 */
  border: 1px solid #4B5563 !important;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

.react-flow__controls-button {
  background: #374151 !important;
  border-bottom: 1px solid #4B5563 !important;
  color: #D1D5DB !important; /* 浅色图标 */
  transition: all 0.2s ease;
}

.react-flow__controls-button:hover {
  background: #4B5563 !important;
  color: #F9FAFB !important;
}

.react-flow__controls-button:last-child {
  border-bottom: none !important;
}

.react-flow__minimap {
  background: #374151 !important; /* 深色小地图 */
  border: 1px solid #4B5563 !important;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

.react-flow__background {
  background: transparent !important; /* 透明背景 */
}

/* 背景网格样式 - 深色主题 */
.react-flow__background-pattern {
  stroke: rgba(148, 163, 184, 0.2) !important; /* 更淡的网格线 */
  opacity: 0.4;
}

/* 连接线样式 - 深色主题 */
.react-flow__edge-path {
  stroke: #64748B !important; /* 更淡的连接线 */
  stroke-width: 2;
  opacity: 0.8;
}

.react-flow__edge.selected .react-flow__edge-path {
  stroke: #60A5FA !important; /* 选中时蓝色 */
  stroke-width: 3;
}

.react-flow__edge:hover .react-flow__edge-path {
  stroke: #D1D5DB !important; /* 悬停时更亮 */
  stroke-width: 3;
}

/* 箭头标记样式 */
.react-flow__arrowhead {
  fill: #9CA3AF !important;
}

.react-flow__edge.selected .react-flow__arrowhead {
  fill: #60A5FA !important;
}

/* 选择框样式 - 深色主题 */
.react-flow__selection {
  background: rgba(96, 165, 250, 0.1) !important;
  border: 1px dashed #60A5FA !important;
}

/* 节点拖拽时的样式 */
.react-flow__node.dragging {
  opacity: 0.7;
}

/* 节点选择时的样式 */
.react-flow__node.selected {
  box-shadow: 0 0 0 2px #60A5FA !important;
}

/* 连接点样式 - 深色主题 */
.react-flow__handle {
  background: #6B7280 !important;
  border: 2px solid #374151 !important;
  width: 8px !important;
  height: 8px !important;
}

.react-flow__handle:hover {
  background: #9CA3AF !important;
}

.react-flow__handle.react-flow__handle-connecting {
  background: #60A5FA !important;
}

/* 响应式调整 */
@media (max-width: 768px) {
  .workflow-canvas-header {
    padding: 16px 20px;
  }
  
  .workflow-title {
    font-size: 20px;
  }
  
  .workflow-description {
    font-size: 13px;
  }
  
  .react-flow__controls {
    transform: scale(0.9);
  }
  
  .react-flow__minimap {
    transform: scale(0.9);
    transform-origin: bottom right;
  }
}

@media (max-width: 480px) {
  .workflow-canvas-header {
    padding: 12px 16px;
  }
  
  .workflow-title {
    font-size: 18px;
  }
}

/* 自定义滚动条 - 深色主题 */
.react-flow__renderer::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.react-flow__renderer::-webkit-scrollbar-track {
  background: #374151;
}

.react-flow__renderer::-webkit-scrollbar-thumb {
  background: #6B7280;
  border-radius: 4px;
}

.react-flow__renderer::-webkit-scrollbar-thumb:hover {
  background: #9CA3AF;
}