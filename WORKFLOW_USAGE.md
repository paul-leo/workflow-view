# å·¥ä½œæµå±•ç¤ºç³»ç»Ÿä½¿ç”¨è¯´æ˜

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **React-Flowé£æ ¼å±•ç¤º**ï¼šé‡‡ç”¨ç°ä»£åŒ–çš„èŠ‚ç‚¹è¿çº¿å¯è§†åŒ–è®¾è®¡
- **äº¤äº’å¼ç”»å¸ƒ**ï¼šæ”¯æŒæ‹–æ‹½å¹³ç§»ã€æ»šè½®ç¼©æ”¾ã€èŠ‚ç‚¹é€‰æ‹©
- **æ™ºèƒ½è¿æ¥çº¿**ï¼šå¹³æ»‘çš„è´å¡å°”æ›²çº¿è¿æ¥ï¼Œæ”¯æŒåŠ¨ç”»æ•ˆæœ
- **å—å±•å¼€/æ”¶èµ·**ï¼šæ”¯æŒåµŒå¥—çš„å­å·¥ä½œæµï¼Œå¯ç‚¹å‡»å±•å¼€æˆ–æ”¶èµ·
- **çŠ¶æ€æŒ‡ç¤º**ï¼šä¸åŒçŠ¶æ€ç”¨é¢œè‰²å’ŒåŠ¨ç”»åŒºåˆ†ï¼ˆpendingã€runningã€completedã€errorï¼‰
- **åº•éƒ¨è¾“å…¥æ¡†**ï¼šæ”¯æŒé€šè¿‡æŒ‡ä»¤æ§åˆ¶å·¥ä½œæµå±•ç¤º
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œæ”¯æŒæš—è‰²æ¨¡å¼

### ğŸ—ï¸ èŠ‚ç‚¹ç±»å‹
- `start`ï¼šå¼€å§‹èŠ‚ç‚¹ ğŸš€
- `end`ï¼šç»“æŸèŠ‚ç‚¹ ğŸ
- `task`ï¼šä»»åŠ¡èŠ‚ç‚¹ ğŸ“‹
- `condition`ï¼šæ¡ä»¶åˆ¤æ–­èŠ‚ç‚¹ â“
- `block`ï¼šå¯å±•å¼€çš„å—èŠ‚ç‚¹ ğŸ“/ğŸ“‚

### ğŸ¨ çŠ¶æ€ç±»å‹
- `pending`ï¼šç­‰å¾…ä¸­ï¼ˆé»„è‰²ï¼‰
- `running`ï¼šè¿è¡Œä¸­ï¼ˆè“è‰²ï¼‰
- `completed`ï¼šå·²å®Œæˆï¼ˆç»¿è‰²ï¼‰
- `error`ï¼šé”™è¯¯ï¼ˆçº¢è‰²ï¼‰

## JSON é…ç½®ç»“æ„

```typescript
interface Position {
  x: number;                     // Xåæ ‡
  y: number;                     // Yåæ ‡
}

interface WorkflowNode {
  id: string;                    // å”¯ä¸€æ ‡è¯†ç¬¦
  title: string;                 // èŠ‚ç‚¹æ ‡é¢˜
  type: 'task' | 'block' | 'condition' | 'start' | 'end';
  status?: 'pending' | 'running' | 'completed' | 'error';
  description?: string;          // èŠ‚ç‚¹æè¿°
  children?: WorkflowNode[];     // å­èŠ‚ç‚¹ï¼ˆä»…blockç±»å‹ï¼‰
  expanded?: boolean;            // æ˜¯å¦å±•å¼€ï¼ˆä»…blockç±»å‹ï¼‰
  position: Position;            // èŠ‚ç‚¹ä½ç½®ï¼ˆå¿…éœ€ï¼‰
  width?: number;                // èŠ‚ç‚¹å®½åº¦
  height?: number;               // èŠ‚ç‚¹é«˜åº¦
  icon?: string;                 // è‡ªå®šä¹‰å›¾æ ‡
  parentId?: string;             // çˆ¶èŠ‚ç‚¹ID
}

interface Connection {
  id: string;                    // è¿æ¥ID
  from: string;                  // æºèŠ‚ç‚¹ID
  to: string;                    // ç›®æ ‡èŠ‚ç‚¹ID
  type?: 'success' | 'error' | 'default';
  label?: string;                // è¿æ¥æ ‡ç­¾
  animated?: boolean;            // æ˜¯å¦æ˜¾ç¤ºåŠ¨ç”»
}

interface Workflow {
  id: string;                    // å·¥ä½œæµID
  title: string;                 // å·¥ä½œæµæ ‡é¢˜
  description?: string;          // å·¥ä½œæµæè¿°
  nodes: WorkflowNode[];         // èŠ‚ç‚¹åˆ—è¡¨
  connections: Connection[];     // è¿æ¥åˆ—è¡¨ï¼ˆå¿…éœ€ï¼‰
}
```

## ä½¿ç”¨ç¤ºä¾‹

### 1. ç®€å•å·¥ä½œæµ
```json
{
  "id": "simple-workflow",
  "title": "ç®€å•ä»»åŠ¡æµç¨‹",
  "nodes": [
    {
      "id": "task1",
      "title": "å‡†å¤‡å·¥ä½œ",
      "type": "task",
      "status": "completed",
      "description": "æ”¶é›†å¿…è¦çš„èµ„æ–™å’Œå·¥å…·",
      "position": { "x": 100, "y": 150 },
      "width": 200,
      "height": 80
    },
    {
      "id": "task2", 
      "title": "æ‰§è¡Œä»»åŠ¡",
      "type": "task",
      "status": "running",
      "description": "æŒ‰ç…§è®¡åˆ’æ‰§è¡Œä¸»è¦ä»»åŠ¡",
      "position": { "x": 350, "y": 150 },
      "width": 200,
      "height": 80
    }
  ],
  "connections": [
    {
      "id": "c1",
      "from": "task1",
      "to": "task2",
      "type": "success",
      "animated": true
    }
  ]
}
```

### 2. å¸¦æœ‰åµŒå¥—å—çš„å¤æ‚å·¥ä½œæµ
```json
{
  "id": "complex-workflow",
  "title": "ç”¨æˆ·æ³¨å†Œæµç¨‹", 
  "nodes": [
    {
      "id": "user-management",
      "title": "ç”¨æˆ·ç®¡ç†æ¨¡å—",
      "type": "block",
      "status": "running",
      "expanded": true,
      "children": [
        {
          "id": "create-user",
          "title": "åˆ›å»ºç”¨æˆ·è´¦æˆ·", 
          "type": "task",
          "status": "completed"
        },
        {
          "id": "notification-block",
          "title": "é€šçŸ¥æœåŠ¡",
          "type": "block",
          "expanded": false,
          "children": [
            {
              "id": "send-email",
              "title": "å‘é€éªŒè¯é‚®ä»¶",
              "type": "task",
              "status": "running"
            }
          ]
        }
      ]
    }
  ]
}
```

## äº¤äº’è¯´æ˜

### ç”»å¸ƒäº¤äº’
- **æ»šè½®ç¼©æ”¾**ï¼šä½¿ç”¨é¼ æ ‡æ»šè½®æ”¾å¤§/ç¼©å°ç”»å¸ƒ
- **æ‹–æ‹½å¹³ç§»**ï¼šç‚¹å‡»ç©ºç™½åŒºåŸŸæ‹–æ‹½ç§»åŠ¨ç”»å¸ƒè§†å›¾
- **èŠ‚ç‚¹é€‰æ‹©**ï¼šç‚¹å‡»èŠ‚ç‚¹è¿›è¡Œé€‰æ‹©ï¼Œé€‰ä¸­çŠ¶æ€ä¼šé«˜äº®æ˜¾ç¤º
- **é‡ç½®è§†å›¾**ï¼šç‚¹å‡»å·¥å…·æ çš„é‡ç½®æŒ‰é’®å›åˆ°é»˜è®¤è§†å›¾

### è¾“å…¥æ¡†å‘½ä»¤
- è¾“å…¥ "ç®€å•" æˆ– "simple"ï¼šåˆ‡æ¢åˆ°ç®€å•å·¥ä½œæµ
- è¾“å…¥ "æ³¨å†Œ" æˆ– "å¤æ‚"ï¼šåˆ‡æ¢åˆ°ç”¨æˆ·æ³¨å†Œå·¥ä½œæµ

### èŠ‚ç‚¹äº¤äº’
- **ç‚¹å‡»å—èŠ‚ç‚¹**ï¼šå±•å¼€/æ”¶èµ·å­èŠ‚ç‚¹
- **ç‚¹å‡»æ™®é€šèŠ‚ç‚¹**ï¼šé€‰æ‹©èŠ‚ç‚¹å¹¶è§¦å‘ç‚¹å‡»äº‹ä»¶
- **è¿æ¥çº¿åŠ¨ç”»**ï¼šè¿è¡Œä¸­çš„è¿æ¥ä¼šæ˜¾ç¤ºæµåŠ¨åŠ¨ç”»

## è‡ªå®šä¹‰å¼€å‘

### æ·»åŠ æ–°çš„èŠ‚ç‚¹ç±»å‹
1. åœ¨ `types/workflow.ts` ä¸­æ‰©å±• `type` è”åˆç±»å‹
2. åœ¨ `WorkflowNode.tsx` çš„ `getNodeIcon` å‡½æ•°ä¸­æ·»åŠ å¯¹åº”å›¾æ ‡
3. åœ¨ `WorkflowNode.css` ä¸­æ·»åŠ å¯¹åº”æ ·å¼

### æ·»åŠ æ–°çš„çŠ¶æ€ç±»å‹
1. åœ¨ `types/workflow.ts` ä¸­æ‰©å±• `status` è”åˆç±»å‹  
2. åœ¨ CSS ä¸­æ·»åŠ å¯¹åº”çš„çŠ¶æ€æ ·å¼ç±»

### è‡ªå®šä¹‰æ ·å¼
- ä¿®æ”¹ `WorkflowNode.css` è°ƒæ•´èŠ‚ç‚¹æ ·å¼
- ä¿®æ”¹ `WorkflowCanvas.css` è°ƒæ•´ç”»å¸ƒæ ·å¼
- ä¿®æ”¹ `InputPanel.css` è°ƒæ•´è¾“å…¥é¢æ¿æ ·å¼

## æŠ€æœ¯æ ˆ
- **React 19** + **TypeScript**
- **CSS3** åŠ¨ç”»å’Œæ¸å˜
- **Vite** æ„å»ºå·¥å…·
- **ESLint** ä»£ç è§„èŒƒ
